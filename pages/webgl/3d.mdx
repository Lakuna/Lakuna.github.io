import MdxArticleLayout from "../../components/MdxArticleLayout.tsx";
import CodePen from "../../components/CodePen.tsx";
import styles from "../../styles/mdx-article.module.scss";
import "katex/dist/katex.min.css";

# 3D

Working with three dimensions in WebGL is almost the same as working with two dimensions.
The main differences are that 3D uses 4x4 matrices (as opposed to 3x3 matrices) and the *depth buffer*.

The third ($z$) part of `gl_Position` is put into the depth buffer.
The depth buffer is used to remember the depth of a given pixel, so that WebGL can draw behind or in front of other pixels based on their depth.
The depth buffer needs to be enabled before it can be modified:

```js
gl.enable(gl.DEPTH_TEST);
```

Just like the color buffer, the depth buffer needs to be cleared before drawing every frame.
With the WebGL API, this can be accomplished like this:

```js
gl.clearColor(0, 0, 0, 0);
gl.clearDepth(1);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
```

With Umbra, the third parameter of `clearContext` can be used to clear the depth buffer:

```js
clearContext(gl, new Color(0x000000), 1);
```

## Orthographic 3D

An *orthographic* projection is way to draw 3D without regard to perspective.

{/*
  https://webgl2fundamentals.org/webgl/lessons/webgl-3d-orthographic.html
*/}

<CodePen slugHash="oNqvKRG" className={styles["full-bleed"]} />

## Perspective

{/*
  https://webgl2fundamentals.org/webgl/lessons/webgl-3d-perspective.html
*/}

## Cameras

{/*
  https://webgl2fundamentals.org/webgl/lessons/webgl-3d-camera.html
  https://webgl2fundamentals.org/webgl/lessons/webgl-visualizing-the-camera.html
  https://xem.github.io/articles/webgl-guide.html#3a
*/}

Next: [Textures](/webgl/textures)

export default function applyLayout({ children }) { return (<MdxArticleLayout>{children}</MdxArticleLayout>); }

export async function getStaticProps() {
  return {
    props: {
      title: "3D",
      description: "An introduction to depth and the techniques used to draw three-dimensional objects in WebGL."
    }
  };
}
