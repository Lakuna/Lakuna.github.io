# 3D

You may need to read [the article about transformation](/a/webgl/transformation) before this one.

---

## Orthographic 3D

Using an orthographic projection matrix, primitives can be drawn in three dimensions without regard
to perspective.

import Orthographic3d from "./Orthographic3d.jsx";

<Orthographic3d style={{ width: "100%" }} />

## Polygon Culling

In the example above, the back of the rotating shape shows through to the front in some places. One
way to fix this is with *polygon culling*, which is where only front-facing polygons are rasterized.
By default, a polygon is considered front-facing if its vertices are defined in a counter-clockwise
orientation relative to the camera.

To enable polygon culling, enable the `CULL_FACE` feature like this:

```js
gl.enable(gl.CULL_FACE);
```

It is also possible to choose whether front- or back-facing polygons should be culled with the
`cullFaces` function like this:

```js
gl.cullFace(gl.BACK);
```

Enabling polygon culling will make any triangles that are defined in the wrong orientation invisible.
The orientation of a triangle can be reversed by swapping the order of the last two vertices.

import PolygonCulling from "./PolygonCulling.jsx";

<PolygonCulling style={{ width: "100%" }} />

## Depth Testing

In the example above, some polygons are showing through others that are in front of them. To fix
this, enable *depth testing*, which tests the depth of fragments and only rasterizes them if they
pass. The depth of fragments is taken from `gl_Position.z` and is stored in the *depth buffer*.

To enable depth testing, enable the `DEPTH_TEST` feature like this:

```js
gl.enable(gl.DEPTH_TEST);
```

Like the color buffer, the depth buffer should be cleared at the beginning of every frame. Also like
the color buffer, this is done by setting a default value and then clearing like this:

```js
gl.clearDepth(1);
gl.clear(gl.DEPTH_BUFFER_BIT);
```

The color and depth buffers can be cleared at the same time with a bitwise or operator like this:

```js
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
```

import DepthTesting from "./DepthTesting.jsx";

<DepthTesting style={{ width: "100%" }} />

## Perspective

WebGL automatically divides `gl_Position.xyz` by `gl_Position.w`. This means that perspective can
be applied using `gl_Position.w`. A *perspective projection* is a projection that scales its shape
based on its distance from the camera.

import Perspective from "./Perspective.jsx";

<Perspective style={{ width: "100%" }} />

## Cameras

Rather than move a scene to fit in the frustum of the camera, it is more common to move the camera
to view the scene. To do so, a matrix called the *camera matrix* can be made to represent the
transformation of the camera. This can be inverted to make a *view matrix*. The projection matrix
can be multiplied by the view matrix to make a *view projection matrix*, which can be used to
multiply world matrices to make *world view projection matrices*, which transforms vertices to
appear from the point of view of the camera.

import Cameras from "./Cameras.jsx";

<Cameras style={{ width: "100%" }} />

---

The next article is about [textures](/a/webgl/textures).
