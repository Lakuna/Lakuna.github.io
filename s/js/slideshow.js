const setSlide=(e,n,l)=>{l&&clearInterval(e.interval),e.index=n,updateSlideshowDisplay(e)},incrementSlide=(e,n,l)=>{l&&clearInterval(e.interval),e.index+=n,updateSlideshowDisplay(e)},updateSlideshowDisplay=e=>{const n=e.content.querySelectorAll(":scope > img."+SLIDESHOW_ITEM_CLASS),l=e.controller.querySelectorAll(":scope > span."+SLIDESHOW_CONTROL_ITEM_CLASS);e.index>n.length&&(e.index=1),e.index<1&&(e.index=n.length);for(let e=0;e<n.length;e++)n[e].classList.remove(ACTIVE_CLASS);for(let e=0;e<l.length;e++)l[e].classList.remove(ACTIVE_CLASS);n.length>=e.index&&n[e.index-1].classList.add(ACTIVE_CLASS),l.length>=e.index&&l[e.index-1].classList.add(ACTIVE_CLASS)},slideshowKeyboardInput=e=>{for(let n=0;n<slideshows.length;n++){const l=slideshows[n];switch(e.keyCode){case DECREMENT_KEYCODE:incrementSlide(l,-1,!0);break;case INCREMENT_KEYCODE:incrementSlide(l,1,!0)}}},slideshows=document.querySelectorAll("div."+SLIDESHOW_CLASS);for(let e=0;e<slideshows.length;e++){const n=slideshows[e];n.content=n.querySelector(":scope > div."+SLIDESHOW_CONTENT_CLASS),n.content||(console.log("Creating empty slideshow content div."),n.content=document.createElement("div"),n.content.className=SLIDESHOW_CONTENT_CLASS,n.append(n.content));const l=n.querySelectorAll(":scope > img");for(let e=0;e<l.length;e++)console.log("Moving slideshow image into slideshow content."),n.content.append(l[e]);n.content.children.length<=0&&console.warn("Slideshow content is empty.");const o=n.content.querySelectorAll(":scope > img");for(let e=0;e<o.length;e++){const n=o[e];n.classList.contains(SLIDESHOW_ITEM_CLASS)||(console.log("Adding slide class to slide."),n.classList.add(SLIDESHOW_ITEM_CLASS))}n.controller=n.querySelector(":scope > div."+SLIDESHOW_CONTROLLER_CLASS),n.controller||(console.log("Adding slideshow controller."),n.controller=document.createElement("div"),n.controller.className=SLIDESHOW_CONTROLLER_CLASS,n.append(n.controller));const t=n.content.querySelectorAll(":scope > img."+SLIDESHOW_ITEM_CLASS);for(let e=1;e<t.length+1;e++){const l=document.createElement("span");l.className=SLIDESHOW_CONTROL_ITEM_CLASS,l.onclick=()=>setSlide(n,e,!0),n.controller.append(l)}const s=[];for(let e=0;e<n.children.length;e++){const l=n.children[e];l!=n.content&&l!=n.controller&&s.push(l)}s.forEach(e=>{console.warn("Removing extraneous node from slideshow."),n.removeChild(e)}),n.index=1,setSlide(n,n.index,!1),n.interval=setInterval(incrementSlide,SLIDESHOW_DELAY,n,1,!1)}document.onkeydown=e=>slideshowKeyboardInput(e);