const openTab=(e,t)=>{if(e.content.querySelector(`:scope > div#${t}`)){const n=e.content.querySelectorAll(`:scope > div.${TAB_CONTENT_CLASS}`),o=e.buttonContainer.querySelectorAll(`:scope > button.${TAB_BUTTON_CLASS}`);for(let e=0;e<n.length;e++){const o=n[e];o.classList.remove(ACTIVE_CLASS),o.id==t&&o.classList.add(ACTIVE_CLASS)}for(let e=0;e<o.length;e++){const n=o[e];n.classList.remove(ACTIVE_CLASS),n.linkedId==t&&n.classList.add(ACTIVE_CLASS)}}else console.warn(`Tab content "${t}" not found.`)},allTabs=document.querySelectorAll(`div.${TAB_CLASS}`);for(let e=0;e<allTabs.length;e++){const t=allTabs[e];t.content=t.querySelector(`:scope > div.${ALL_TAB_CONTENT_CLASS}`),t.content||(console.log("Adding all tab content container."),t.content=document.createElement("div"),t.content.className=ALL_TAB_CONTENT_CLASS,t.append(t.content)),t.buttonContainer=t.querySelector(`:scope > div.${ALL_TAB_BUTTON_CLASS}`),t.buttonContainer||(console.log("Adding tab button container."),t.buttonContainer=document.createElement("div"),t.buttonContainer.className=ALL_TAB_BUTTON_CLASS,t.prepend(t.buttonContainer));const n=t.querySelectorAll(":scope > div");for(let e=0;e<n.length;e++){const o=n[e];o!=t.buttonContainer&&o!=t.content&&(console.log("Moving div into all tab content."),t.content.append(o))}const o=t.content.querySelectorAll(":scope > div");for(let e=0;e<o.length;e++){const t=o[e];t.classList.contains(TAB_CONTENT_CLASS)||(console.log("Adding tab content class to tab content."),t.classList.add(TAB_CONTENT_CLASS))}const c=t.content.querySelectorAll(`:scope > div.${TAB_CONTENT_CLASS}`);for(let e=0;e<c.length;e++){const n=c[e];let o="";if(n.id)o=n.id;else{console.warn("Tab content lacks an ID. Assigning a placeholder.");let e=1;for(o=`Tab_${e}`;document.getElementById(o);)o=`Tab_${++e}`;n.id=o}const l=document.createElement("button");l.className=TAB_BUTTON_CLASS,l.onclick=(()=>openTab(t,o)),l.linkedId=o,l.innerHTML=o.replace(/_/g," "),t.buttonContainer.append(l)}const l=[];for(let e=0;e<t.children.length;e++){const n=t.children[e];n!=t.content&&n!=t.buttonContainer&&l.push(n)}l.forEach(e=>{console.warn("Removing extaneous node from all tab."),t.removeChild(e)});const a=new URLSearchParams(location.search).get("tab");a&&openTab(t,a)}